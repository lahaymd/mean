"use strict";!function(){angular.module("myApp",["ui.router","ngAnimate","ngMessages","ngMaterial","angular-inview","md.data.table"]).config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("teal").warnPalette("red").backgroundPalette("grey").dark()}])}(),function(){function e(e,t,n){t.otherwise("/"),n.html5Mode(!0),e.state("login",{url:"/",templateUrl:"/partials/login",controller:"LoginController",data:{restricted:!1},controllerAs:"vm"}).state("hireme",{url:"/hireme",templateUrl:"/partials/hireme",data:{restricted:!1},controller:"HireMeController"}).state("users",{url:"/users",templateUrl:"/partials/users",data:{restricted:!0},controller:"UserController"}).state("users.detail",{url:"/:id",templateUrl:"/partials/selecteduser",controller:"UserController",data:{restricted:!0}}).state("register",{url:"/register",templateUrl:"/partials/register",controller:"RegisterController",data:{restricted:!0},controllerAs:"vm"}).state("api",{url:"/api/user",templateUrl:"/partials/users",data:{restricted:!0},controller:"UserController"}).state("readerboard",{url:"/readerboard",templateUrl:"/partials/readerboard",controller:"ReaderboardController",data:{restricted:!0},controllerAs:"vm"}).state("pdf",{url:"/pdf",templateUrl:"/partials/pdf",data:{restricted:!1}}).state("portfolio",{url:"/portfolio",data:{restricted:!0},component:"portfolio"})}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("myApp").config(e).run(["$rootScope","$transitions","$state","$mdToast","$location",function(e,t,n,o,r){t.onBefore({to:"*"},function(e){var t=e.injector().get("AuthService"),n=e.$to().data.restricted;return t.getUserStatus().then(function(o){if(!t.isLoggedIn()&&n)return t.showToast(),e.router.stateService.target("login")})})}])}(),angular.module("myApp").factory("AuthService",["$q","$timeout","$http","$mdToast",function(e,t,n,o){function r(){console.log("from show toast service"),o.show(o.simple().textContent("not logged in ").position("top").hideDelay(3e3).theme("success-toast"))}function i(e){return n.put("/api/users/"+e._id,e).then(function(e){return e.data},function(e){})}function l(e){return n["delete"]("api/users/"+e).then(function(e){return e.data},function(e){})}function a(e){return n.get("/api/users/"+e).then(function(e){return e.data},function(e){})}function s(){return n.get("/api/users").then(function(e){return e.data},function(e){})}function u(){return n.get("/api/hireme").then(function(e){return e.data},function(e){})}function c(){return!!$}function d(){return n.get("/api/mongolab/status").then(function(e){return e.data.status!==!1?($=!0,e.data):($=!1,e.data)},function(e){$=!1})}function f(e,t){return n.post("/user/login",{username:e,password:t}).success(function(e,t){200===t&&e.status?($=!0,deferred.resolve()):($=!1,deferred.reject())}).error(function(e){$=!1,deferred.reject()})}function g(){return n.get("/api/mongolab/logout").then(function(e){$=!1},function(e){$=!1})}function m(e,t){return n.post("/api/users",{username:e,password:t}).then(function(e){return e.data},function(e){})}function p(){return n.get("/api/mongolab").then(function(e){return e.data},function(e){})}function h(e,t,o){var r=new FormData;return r.append("fuck",e),r.append("shit",t),void 0===o?(alert(1),r.append("files","/images/cooper1.png")):r.append("files",o[0]),console.log(e),console.log(t),console.log("ffiless",o),n.post("/api/mongolab",r,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(e){return""==e.data||"this names taken"==e.data?alert("already in db"):$=!0,e.data},function(e){})}function v(e,t){return n.post("/api/mongolab/login",{fuck:e,shit:t}).then(function(e){return $=e.data.shit===t,e.data},function(e){alert(e)})}function y(){return n.get("/api/mongolab/sess").then(function(e){return e.data},function(e){})}function b(){return n.get("/api/mongolab/id").then(function(e){return e.data},function(e){})}function w(e,t,o,r,i){return n.post("/api/hireme",{firstname:e,lastname:t,email:o,phone:r,message:i}).then(function(e){return e.data},function(e){})}var $=null,A={isLoggedIn:c,getUserStatus:d,login:f,logout:g,register:m,getUsers:s,find:a,remove:l,update:i,getMongoLab:p,postToMongoLab:h,findMongoLab:v,hire:w,getHired:u,getSession:y,showToast:r,getUser:b};return A}]),angular.module("myApp").component("exampleComponent",{bindings:{message:"=",brand:"<",flavor:"@",at:"@",lucy:"@"},templateUrl:"/partials/example-component",controller:function(){this.message="Michael component",this.ctrlFlavor="blackberry"}}),angular.module("myApp").controller("ExampleController",["$scope","$mdToast",function(e,t){e.date=new Date,e.ctrlName="foo",e.ctrlFlavor="cherry",e.isDisabled=!0,e.saySomething=function(){alert("say something!")},e.someMethod=function(e){alert(e)},e.showToast=function(){t.show({hideDelay:5e3,position:"top right",parent:angular.element(document.querySelector("#toastContainer")),template:'<md-toast><span class="md-toast-text" flex>Custom toast!</span><md-button class="md-highlight" ng-click="openMoreInfo($event)">More info</md-button><md-button ng-click="closeToast()">Close</md-button></md-toast>'})}}]),angular.module("myApp").directive("example",function(){return{restrict:"AE",templateUrl:"/partials/example-directive",link:function(e,t,n,o){}}}),angular.module("myApp").component("portfolio",{templateUrl:"/partials/portfolio"}),function(){angular.module("myApp").controller("FooterController",function(){var e=this;e.date=(new Date).getFullYear()})}(),function(){angular.module("myApp").controller("HireMeController",["AuthService","$scope","$mdDialog","$mdToast",function(e,t,n,o){t.hiremelist;var r=function(){e.hire(t.hiremelist.firstname,t.hiremelist.lastname,t.hiremelist.email,t.hiremelist.phone,t.hiremelist.message).then(function(e){console.log("New",JSON.stringify(e)),t.hiremelist.push(e),console.log("new user",e),angular.element(document.querySelectorAll("input")).val("")},function(e){alert(JSON.stringify(t.hiremelist)),alert(e)})};t.showConfirm=function(e){var o=n.confirm().title("Would you like to submit form?").textContent("press ok to submit press cancel to cancel").ariaLabel("Lucky day").targetEvent(e).ok("submit!").cancel("cancel");n.show(o).then(function(){r(),t.openToast(),angular.element(document.querySelectorAll("input")).val("")},function(e){alert(e)})},t.openToast=function(e){o.show(o.simple().textContent("sent").position("bottom").hideDelay(1e4))};var i=function(){e.getHired().then(function(e){t.hiremelist=e,console.log("users",e)},function(e){console.log(e)})};i()}])}(),function(){angular.module("myApp").controller("NavController",["$mdSidenav","$location","AuthService","$mdDialog",function(e,t,n,o){var r=this;r.showAdvanced=function(e){o.show({controller:"DialogController",controllerAs:"dialog",templateUrl:"/partials/sign-up",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){r.userr=e,r.getSession(),r.fetchMongoLab()},function(e){})},r.showSignIn=function(e){o.show({controller:"DialogController",controllerAs:"dialog",templateUrl:"/partials/sign-in",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){console.log("answer",e),r.userr=e,r.getSession(),r.fetchMongoLab()},function(e){})},r.fetchMongoLab=function(){n.getMongoLab().then(function(e){r.userlist=e},function(e){})},r.fetchMongoLab(),r.logout=function(){n.logout().then(function(){r.session="",r.user={},t.path("/")})},r.isLogged=function(){return n.isLoggedIn()},r.isLogged(),r.getSession=function(){n.getSession().then(function(e){r.session=e.authenticated},function(e){})},r.getSession(),r.persistUser=function(){n.getUser().then(function(e){r.userr=e})},r.persistUser(),r.currentNavItem=t.path().slice(1)||"login",console.log("current nav item",r.currentNavItem),r.open=function(){e("left").toggle()}}]).controller("SidenavController",["$mdSidenav",function(e){var t=this;t.toggleNav=function(){return e("left").toggle()}}]).controller("DialogController",["AuthService","$scope","$interval","$window","$mdDialog","$location",function(e,t,n,o,r,i){var l=this;l.closeDialog=function(){r.cancel()},l.saveToMongoLab=function(){e.postToMongoLab(l.userlist.fuck,l.userlist.shit,l.userlist.files).then(function(e){void 0===e.fuck&&alert("already in db"),r.hide(e)})["catch"](function(e){})},l.loginToMongoLab=function(){e.findMongoLab(l.loginForm.fuck,l.loginForm.shit).then(function(e){console.log("USER",e),r.hide(e)})["catch"](function(e){})}}]).controller("LoginController",["AuthService","$scope","$interval","$window","$mdDialog",function(e,t,n,o,r){var i=this;i.user="mik",i.scale=15,i.sd=15,i.rad=0;var l=!1,a=!1,s=function(e){var t=0;if(e.offsetParent)do t+=e.offsetTop,e=e.offsetParent;while(e);return t>=0?t:0},u=document.querySelector("#blurredimg"),c=s(u),d=document.querySelector("#pica"),f=s(d),g=u.clientHeight,m=d.clientHeight;angular.element(o).on("scroll",function(){l=!0,a=!0,t.$apply(n(function(){l&&i.isVisible&&(l=!1,i.sd=Math.round((c+g-(o.scrollY+o.innerHeight))/50)),a&&i.isVis&&(a=!1,i.scale=Math.round((f+m-(o.scrollY+o.innerHeight))/50))},500))}),i.addLogo=function(){var e=document.querySelector("#b");e.classList.add("logo-path")}}])}(),function(){angular.module("myApp").controller("ReaderboardController",["$scope",function(e){var t=this;t.areaOne=function(e,n){function o(e){d3.event.active||v.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}function r(e){e.fx=d3.event.x,e.fy=d3.event.y}function i(e){d3.event.active||v.alphaTarget(0),e.fx=null,e.fy=null}function l(){b.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}),w.attr("x",function(e){return e.x}).attr("y",function(e){return e.y})}var a=function(e){return e=e||"",e.replace(/\s+/g,"").split("").sort().map(function(e){return e.toLowerCase().match(/\S/g)}).reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){var n=e[0].indexOf(t);return n===-1?(e[0].push(t),e[1].push(1)):e[1][n]+=1,e},[[],[]]).reduce(function(e,t,n,o){var r=[];return e.forEach(function(e,t){r.push([e,o[1][t]])}),r})};t.letters=a(e),t.lettersTwo=a(n);var s=function(){Array.from(document.getElementsByClassName("d3")).forEach(function(e,t,n){e.remove()});for(var e=[],n=t.letters.length,o=t.lettersTwo.length,r=t.lettersTwo.map(function(e){return e[0]}),i=t.letters.map(function(e){return e[0]}),l=t.letters.map(function(e){return e[1]}),a=t.lettersTwo.map(function(e){return e[1]}),s=0;s<n;s++)if(r.indexOf(i[s])===-1)e.push([i[s],-Math.abs(l[s])]);else{r.findIndex(function(e,t,n){return e===i[s]})}for(var s=0;s<o;s++)if(i.indexOf(r[s])!==-1){var u=i.findIndex(function(e,t,n){return e===r[s]});e.push([r[s],a[s]-l[u]])}else e.push([r[s],a[s]]);return console.log(e),e};t.results=s().sort(),t.changeZero=function(){NaN!==t.results[0][1]&&t.results[0][1]++};var u=500,c=500,d=40,f=d3.select(".d3-attach").insert("svg",":first-child").attr("class","d3").attr("width",u+d+d).attr("height",c+d+d),g=f.append("g").attr("transform","translate("+u/2+","+c/2+")"),m=t.results.map(function(e){return Math.abs(e[1])}),p=d3.scaleOrdinal(d3.schemeCategory20),h=d3.scaleLinear().domain([1,d3.max(m)]).range([20,75]);console.log(d3.max(m)),console.log(m),console.log(d3.min(m)),console.log(h(10)),console.log(h(-10)),console.log(h(Math.abs(-10)));var v=d3.forceSimulation().force("x",d3.forceX(u/2).strength(.002)).force("y",d3.forceY(c/2).strength(.002)).force("collide",d3.forceCollide(function(e){return Math.abs(h(e[1]))+2}).iterations(16)).force("center",d3.forceCenter()).force("charge",d3.forceManyBody().strength([100])),y=g.selectAll("circles").data(t.results,function(e){return e}),b=y.enter().append("circle").attr("fill",function(e){return e[1]<0?"pink":p(e[1])}).style("opacity",function(e){return 0===e[1]?0:1}).attr("id",function(e){return e[0]}).attr("r",function(e){return h(Math.abs(e[1]))}).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).call(d3.drag().on("start",o).on("drag",r).on("end",i)),w=y.enter().append("text").text(function(e){return e[0]+" : "+e[1]}).style("font-size","12px").attr("transform","translate(-9,6)");d3.select("#a").attr("fill","yellow"),v.nodes(t.results).on("tick",l)}}])}(),function(){angular.module("myApp").controller("RegisterController",["$location","AuthService",function(e,t){var n=this;n.registerForm={},n.register=function(){t.register(n.registerForm.username,n.registerForm.password).then(function(){n.registerForm={},e.path("/users")})["catch"](function(e){alert(e)})}}])}(),function(){angular.module("myApp").controller("ShowUserController",["$scope","$stateParams","AuthService",function(e,t,n){var o=function(){n.find(t.id).then(function(t){e.selectedUser=t,console.log(t,"!!!")},function(e){console.log(e)})};o(),e.updateUserx=function(){console.log(e.selectedUser),n.update(e.selectedUser).then(function(){console.log("updated from controller")},function(e){console.log("you fucked up"),console.log(e.message)})}}])}(),function(){angular.module("myApp").controller("UserController",["$scope","$transition$","AuthService","$location","$window","$mdDialog","$state","$timeout",function(e,t,n,o,r,i,l,a){e.numbers=[];for(var s=1;s<=100;s++)e.numbers.push(s);e.displayPagination=function(t){0===t&&(e.begin=0),e.begin=t*e.displayAmount},e.lists=["username","id","password"],e.sortBy=function(t){e.propertyName=t},e.limitDisplayedTo=function(t){e.displayAmount=t,e.limit=Math.ceil(e.userlistLength/e.displayAmount)},e.fetchUsers=function(){n.getUsers().then(function(t){console.log("users",t),e.userlist=t,e.userlistLength=t.length,e.displayAmount=e.displayAmount||3,e.limit=Math.ceil(e.userlistLength/e.displayAmount),console.log(t)},function(e){console.log(e)})},e.fetchUsers(),e.showConfirm=function(e){i.show({template:'<md-dialog ng-show="isLoading" id="plz_wait" style="background-color:transparent;box-shadow:none"><div layout="row" layout-sm="column" layout-align="center center" aria-label="wait"><md-progress-circular md-mode="indeterminate" ></md-progress-circular></div></md-dialog>',parent:angular.element(document.body),clickOutsideToClose:!1,fullscreen:!1}).then(function(){},function(e){alert(e)})},e.removeUser=function(t){console.log(t),e.isLoading=!0,n.remove(t).then(function(n){console.log(n),console.log(e.userlist),console.log(t);var o=e.userlist.findIndex(function(e){return e._id==t});e.userlist.splice(o,1),e.userlistLength=e.userlist.length,e.limit=Math.ceil(e.userlistLength/e.displayAmount),console.log("promise returned"),e.isLoading=!1})},e.scrollMe=function(){a(function(){var e=document.querySelector("#uname");e.focus()},1500)},e.updateUser=function(){console.log("selected user",e.selectedUser),n.update(e.selectedUser).then(function(e){l.go("^",null,{reload:!0}),a(function(){var e=document.getElementById("table");e.scrollIntoView()},100)},function(e){console.log("you fucked up"),console.log(e.message)})},e.register=function(){e.isLoading=!0,n.register(e.userlist.username,e.userlist.password).then(function(t){console.log(t),e.userlist.push(t),e.userlistLength=e.userlist.length,e.limit=Math.ceil(e.userlistLength/e.displayAmount),angular.element(document.querySelectorAll("input")).val(""),e.isLoading=!1})["catch"](function(e){alert(e)})}}])}(),function(){angular.module("myApp").directive("fileInput",["$parse",function(e){return{restict:"A",link:function(t,n,o){n.bind("change",function(){e(o.fileInput).assign(t,n[0].files),t.$apply(),console.log(o.fileInput,"file input")})}}}])}(),function(){angular.module("myApp").directive("myDirective",function(){return{restrict:"E",transclude:!0,template:"<div>I am <span ng-transclude></span> directive {{test}}   {{userlist[0].username}}</div>",link:function(e,t,n){t.addClass("foo"),console.log(parseInt(n.bar)+6)}}})}();